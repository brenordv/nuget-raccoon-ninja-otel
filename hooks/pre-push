#!/bin/sh

echo "ğŸš€ Preparing to push! Running pre-push checks..."

# Run formatting check
echo "ğŸ” Checking code formatting..."
if ! dotnet format --no-restore --verify-no-changes; then
    echo "âŒ Formatting check failed! Fix your code by running: 'dotnet format'"
    exit 1
fi
echo "âœ…  Formatting looks good!"

# Run tests
echo "ğŸ§ª Running tests..."
if ! dotnet test --no-restore --logger:"console;verbosity=normal"; then
    echo "âŒ Tests failed! Fix the issues before pushing."
    exit 1
fi
echo "âœ…  All tests passed!"

echo "ğŸ‰ All checks passed! Push away!"
exit 0
